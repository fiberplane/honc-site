import { css, cx } from "hono/css";
import { Wrapper } from "../components";
import { useRef, useState } from "hono/jsx";

import { useIntersectionObserver } from "../hooks";

export function HoncerAscii() {
  const preRef = useRef<HTMLPreElement>(null);
  const [isIntersecting, setIsIntersecting] = useState(false);

  useIntersectionObserver(preRef, (entries, observer) => {
    for (const entry of entries) {
      if (entry.isIntersecting) {
        setIsIntersecting(true);
        observer.disconnect();
      }
    }
  });

  return (
    <Wrapper>
      <pre
        role="img"
        aria-label="ASCII art of a person working behind a computer"
        ref={preRef}
        class={cx(preClass, isIntersecting && "fade-in")}
      >
        {/*
          We can't trim the ASCII art as it otherwise removes all whitespace
          from the first line. To prevent a layout shift after hydrating we're
          adding a whitespace character at the beginning of the ASCII art.
        */}{" "}
        {HONCER_ASCII}
      </pre>
    </Wrapper>
  );
}

const preClass = css`
  font-size: clamp(0.25rem, 1.5cqw, 0.75rem);
  line-height: 1;
  margin-inline: auto;
  text-align: center;
  color: transparent;
  background-image: radial-gradient(
      circle at center 44em,
      var(--radial-color) 4em,
      transparent var(--radial-range)
    ),
    linear-gradient(
      hsl(from var(--color-fg-primary) 35deg s l) 10%,
      var(--color-fg-primary)
    );
  background-clip: text;

  &.fade-in {
    animation: radial-entry 3s forwards ease-in-out;
  }
`;

const HONCER_ASCII = `
                                        -----------------                                         
                                    ----:::..............:::-----                                  
                                  --::........................::----                               
                                --::.............................:::---                            
                            ---=-:................................:::---                          
                          ------==-:................................::::---                        
                        --:..:-=+=-::::.................::......::::::::---                       
                      --:..::::=++=-:::::::::::::::::::::::::::::::::::::---                      
                      ---:::::::-=*+=--:::::::::::::::::::::::::::::::---::---                     
                      --:::::::--=*#*+==----:::::::::::------------------------                    
                    --:::::::---=**##*++=-------------------------------------=                   
                    --:::::-----=++=+*##*++==---------------------------------=                   
                    =--::---------++=-==+*##**++====-----------==--------------=                   
                    =-----------=*++=-----==++******++++===----=+=-------------==                  
                    =--------===-=++=------------===++++*****+==**====---------=+                  
                    +--------+#*+=--------------------------==++=**++*+--------=+                  
                    ==------+*-----==+***=:---------------+*++==--+**#*+------==+                  
                    +=----=+*=-=##*+----:::::::::::::----------=+##+-=#*+-----==                   
                    =---=+*=----:::::::::::::::::::::::::::::::------=**=---==+                   
                    +=--++-------=+==+==-:::::::::::::::::-====+=-----=*+=-===                    
                      ++=++-----=--#==@@%=--:::::::::::::--#+=%@@+:==---=*+=+++                    
                      --=+=-----.:%@*#@@@%-:-::::::::::::.#@#*@@@%+.:=--=++=--                     
                      =--+=----..-%@@@@@%#=.:-:::::::::-.:%@@@@@%#+..:--=++=--                     
                      ---==----:..=%%%%*=+...:::::::::::..-%%%%*=+:..:--==+=--                     
                      ---===----::..-=+=:..:::::::::::::::..:=+=:.::----===---                     
                      ---==-------:::::::::::::::::::::::::::::--------===--=                     
                      -====--------:::::::::::::::::::::::::::::------=====-                      
                        -====--------::::::::---:::::--::::::::--------=====                       
                        =+#+==----------:::::-===---==--::::::---------=+#+=                       
              ---------------------:--::::::::---------::::::-------------------------             
              ++++++======================================================++++++++++++=            
              +++++++++++++=========================================+++++++++++++++++++            
              ++++++++++++=+========================================+++++++++++++++++++            
              +++++++++++++=======================================+++++++++++++++++++++            
              +++++++++++++========================================++++++++++++++++++++            
              ++++++++++++++========================================+++++++++++++++++++            
              +++++++++++++++=====================================+++++++++++++++++++++            
              +++++++++++++++=====================================+++++++++++++++++++++            
              +++++++++++++++======================+=============++++++++++++++++++++++            
              +++++++++++++++=+=================================+=+++++++++++++++++++++            
              +++++++++++++++++==============ðŸª¿ðŸª¿ðŸª¿ðŸª¿ðŸª¿ðŸª¿=========+++++++++++++++++++++++             
              ++++++++++++++++++============+ðŸª¿ðŸª¿ðŸª¿ðŸª¿ðŸª¿ðŸª¿+========+++++++++++++++++++++++             
              +++++++++++++++++++===========+ðŸª¿ðŸª¿ðŸª¿ðŸª¿ðŸª¿ðŸª¿+++=====++++++++++++++++++++++++             
            ##*+++++++++++++++++++=========+ðŸª¿ðŸª¿ðŸª¿ðŸª¿ðŸª¿ðŸª¿-++=+++++++++++++++++++++++++++#%           
            ###*+++++++++++++++++++=========+ðŸª¿ðŸª¿ðŸª¿ðŸª¿ðŸª¿ðŸª¿+++++=+++++++++++++++++++++++++#%#           
          #####*++++++++++++++++++++=======++ðŸª¿ðŸª¿ðŸª¿ðŸª¿ðŸª¿ðŸª¿+++++++++++++++++++++++++++++++##%%          
          #####*+++++++++++++++++++++++++++====+++++++++++++++++++++++++++++++++++++++++##%%%         
        ######*+++++++++++++++++++++++++++++==+++++++++++++++++++++++++++++++++++++++++###%%%        
        ########+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++*####%%%       
      %########+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++*####%%%       
      #########+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++*#####%%%      
      %%#######*++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++*#####%%%      
      %%########***++*+++++++++++++++++++++++++++++++++++++++++++++++++*********+++****######%%%%     
`;
